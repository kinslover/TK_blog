<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Best Time to Buy and Sell Stock I, II and III</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

        <script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script> 

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-45812015-1', 'tkcrown.github.io');
      ga('send', 'pageview');

    </script>            


    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">TK_blog</a></h1>
            <a class="extra" href="/">Home</a>
            <a class="extra" href="/notes">Notes</a>
            <a class="extra" href="/cv/cv.pdf">CV</a>
            <a class="extra" href="/hobbies">Hobbies</a>
            <a class="extra" href="/algorithms">Algorithms</a>
            <a class="extra" href="/calendar">Calendar</a>
          </div>

          <h2>Best Time to Buy and Sell Stock I, II and III</h2>
<p class="meta">13 Aug 2014</p>

<div class="post">
<h1 id="description">Description</h1>

<p>I: https://oj.leetcode.com/problems/best-time-to-buy-and-sell-stock/</p>

<p>The first problem requires that we compute the possible maximum profit for at most one transaction.</p>

<p>II: https://oj.leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/</p>

<p>The first problem requires that we compute the possible maximum profit for at any number of transactions.</p>

<p>III: https://oj.leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/</p>

<p>The first problem requires that we compute the possible maximum profit for two transactions.</p>

<h1 id="analysis">Analysis</h1>

<h2 id="problem-i">Problem I</h2>
<p>It is easy to solve the first problem by iterating the price vector just once. We keep the currently smallest stock price during the iteration and we update the maximum profit iteratively by </p>

<script type="math/tex; mode=display">maxProfitLeft[t] = max(maxProfitLeft[t-1], price[t] - currentMinimum),</script>

<p>where  <script type="math/tex">maxProfitLeft[t]</script> is the possible maximum profit during <script type="math/tex">[0,t]</script> and <script type="math/tex">maxProfitLeft[0] = 0</script>.</p>

<h2 id="problem-ii">Problem II</h2>
<p>It is even easier to solve the second problem. As long as price[t] &gt; price[t-1], we make a transaction. This strategdy will lead to maximum profit.</p>

<h2 id="problem-iii">Problem III</h2>

<p>For the third question, the trivial thought would be that we enumerate the seperate time point of the two transactions and use the solution in problem I as subprocess to find the best separate point and thus the maximum profit. In this case, the time complexity is <script type="math/tex">O(n^2)</script>. Then we notice that there exists redundant computation in this procedure. There is a better way to avoid the redundant computation.</p>

<p>We compute <script type="math/tex">maxProfitLeft[t]</script> as we did in problem I.</p>

<p>Then we define <script type="math/tex">maxProfitRight[t]</script> indicating the maximum profit we can get from one transaction during the time <script type="math/tex">[t, T]</script>, where <script type="math/tex">T</script> is the total number of time points, or the size of array <script type="math/tex">prices[]</script>. The way to compute it is</p>

<script type="math/tex; mode=display">maxProfitRight[t] = max(maxProfitLeft[t+1], currentMaximum - price[t]), </script>

<p>where <script type="math/tex">maxProfitLeft[T+1] = 0</script>.</p>

<p>Then the maximum profit for two non-overlapping transactions is </p>

<script type="math/tex; mode=display">maxProfit = \max_{t = 1..n} maxProfitLeft[t] + maxProfitRight[t]</script>

<p>Thus the time complexity of this solution is <script type="math/tex">O(n)</script>.</p>

<h1 id="solution">Solution</h1>

<p>The implementations are slightly different from the algorithm descriptions out of efficiency and convenience reasons.</p>

<h2 id="problem-i-1">Problem I</h2>

<div class="highlight"><pre><code class="c++"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
      	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">())</span>
        	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  		<span class="kt">int</span> <span class="n">cur_lowest</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  		<span class="kt">int</span> <span class="n">max_profit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span> <span class="n">i</span><span class="p">){</span>
  			<span class="n">cur_lowest</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">cur_lowest</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
  			<span class="n">max_profit</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">max_profit</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cur_lowest</span><span class="p">);</span>
  		<span class="p">}</span>      
  		<span class="k">return</span> <span class="n">max_profit</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>

<h2 id="problem-ii-1">Problem II</h2>

<div class="highlight"><pre><code class="c++"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
    	<span class="kt">int</span> <span class="n">profit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    	    	
    	<span class="c1">//size_t is unsigned and thus tranformed into int, in case of prices.size()=0</span>
  		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">)</span>    		
			<span class="n">profit</span> <span class="o">+=</span> <span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">?</span> <span class="p">(</span><span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span>
  		<span class="k">return</span> <span class="n">profit</span><span class="p">;</span>   
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div>

<h2 id="problem-iii-1">Problem III</h2>

<div class="highlight"><pre><code class="c++"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">maxProfit</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">prices</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">maxLeftProfit</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>

        <span class="n">memset</span><span class="p">(</span><span class="n">maxLeftProfit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">currentLowest</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>        
        <span class="n">maxLeftProfit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">){</span>
            <span class="n">currentLowest</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">currentLowest</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="n">maxLeftProfit</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">maxLeftProfit</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">currentLowest</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kt">int</span> <span class="n">maxProfit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">currentHighest</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span> <span class="n">i</span><span class="p">){</span>
            <span class="n">currentHighest</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">currentHighest</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="kt">int</span> <span class="n">maxRightProfit</span> <span class="o">=</span> <span class="n">currentHighest</span> <span class="o">-</span> <span class="n">prices</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="n">maxProfit</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">maxLeftProfit</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">maxRightProfit</span><span class="p">,</span> <span class="n">maxProfit</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">maxProfit</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">};</span>
</code></pre></div>


</div>

          <div class="footer">
            <div class="contact">
              <p>
                My Github<br />
                E-mail<br />
                LinkedIn
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/kinslover">github.com/kinslover</a><br />
                pjin1[[at]]ualberta[dot]ca<br />
                http://www.linkedin.com/pub/ping-jin/3a/a3b/97a
              </p>
            </div>
          </div>



    <!--disqus-->
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'tkcrown'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    



    </body>
</html>
