<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Longest Valid Parentheses</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

        <script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script> 

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-45812015-1', 'tkcrown.github.io');
      ga('send', 'pageview');

    </script>            


    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">TK_blog</a></h1>
            <a class="extra" href="/">Home</a>
            <a class="extra" href="/notes">Notes</a>
            <a class="extra" href="/cv/cv.pdf">CV</a>
            <a class="extra" href="/hobbies">Hobbies</a>
            <a class="extra" href="/algorithms">Algorithms</a>
            <a class="extra" href="/calendar">Calendar</a>
          </div>

          <h2>Longest Valid Parentheses</h2>
<p class="meta">09 Aug 2014</p>

<div class="post">
<h1 id="description">Description</h1>

<p>Given a string containing just the characters ‘(‘ and ‘)’, find the length of the longest valid (well-formed) parentheses substring.</p>

<p>For “(()”, the longest valid parentheses substring is “()”, which has length = 2.</p>

<p>Another example is “)()())”, where the longest valid parentheses substring is “()()”, which has length = 4.</p>

<h1 id="solution">Solution</h1>

<div class="highlight"><pre><code class="c++"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="lineno"> 2</span> <span class="nl">public:</span>
<span class="lineno"> 3</span>     <span class="kt">int</span> <span class="n">longestValidParentheses</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 4</span> 		<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
<span class="lineno"> 5</span> 		<span class="kt">int</span> <span class="n">mx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 6</span> 		<span class="n">stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="n">stk</span><span class="p">;</span>
<span class="lineno"> 7</span> 		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">){</span>
<span class="lineno"> 8</span> 			<span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;(&#39;</span><span class="p">)</span>
<span class="lineno"> 9</span> 				<span class="n">stk</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="lineno">10</span> 			<span class="k">else</span><span class="p">{</span>
<span class="lineno">11</span> 				<span class="k">if</span><span class="p">(</span><span class="n">stk</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
<span class="lineno">12</span> 					<span class="k">continue</span><span class="p">;</span>
<span class="lineno">13</span> 				<span class="kt">int</span> <span class="n">to_push</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">14</span> 				<span class="k">if</span> <span class="p">(</span><span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
<span class="lineno">15</span> 					<span class="n">to_push</span> <span class="o">=</span> <span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="lineno">16</span> 					<span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="lineno">17</span> 				<span class="p">}</span>
<span class="lineno">18</span> 
<span class="lineno">19</span> 				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stk</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
<span class="lineno">20</span> 					<span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="lineno">21</span> 					<span class="n">to_push</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
<span class="lineno">22</span> 					<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">stk</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
<span class="lineno">23</span> 						<span class="n">to_push</span> <span class="o">+=</span> <span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="lineno">24</span> 						<span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="lineno">25</span> 					<span class="p">}</span>
<span class="lineno">26</span> 					<span class="n">stk</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">to_push</span><span class="p">);</span>
<span class="lineno">27</span> 					<span class="n">mx</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span> <span class="n">to_push</span><span class="p">);</span>
<span class="lineno">28</span> 				<span class="p">}</span>
<span class="lineno">29</span> 
<span class="lineno">30</span> 			<span class="p">}</span>	
<span class="lineno">31</span> 		<span class="p">}</span>
<span class="lineno">32</span> 		<span class="k">return</span> <span class="n">mx</span><span class="p">;</span>
<span class="lineno">33</span> 	<span class="p">}</span>
<span class="lineno">34</span> <span class="p">};</span>
</code></pre></div>

<h1 id="analysis">Analysis</h1>

<p>We maintain a stack which contains some positive number and -1 (representing ‘(‘).</p>

<p>First, I will use the example “())(())” of how this algorithm works.</p>

<ol>
  <li>S[0] = ‘(‘: pushing -1 into the stack  (stk = “(“ )</li>
  <li>S[1] = ‘)’: As stk is not empty and stk.top() = ‘(‘ we pop the top and then push 2 into the stack. the maximum variable is updated to 2. (stk = “2” )</li>
  <li>S[2] = ‘)’: As stk.top() == a number, we pop the number. Then the stk is empty. (stk = “” )</li>
  <li>S[3] = ‘(‘: pushing -1 into the stack  (stk = “(“ )</li>
  <li>S[4] = ‘(‘: pushing -1 into the stack  (stk = “((“ )</li>
  <li>S[5] = ‘)’: As stk.top() == ‘(‘, we pop the top and push 2. (stk = “(2” )</li>
  <li>S[6] = ‘)’: As stk.top() == a number, we pop the number 2. Then the stk is NOT empty and the current top is ‘(‘. So we pop ‘(‘ and push the sum (2+2=4) into the stk. (stk = “4” ) we update the maximum variable to be 4. (stk = “4” )</li>
</ol>

<p>This procedure of stk’s changing shows the algorithm more clearly. Some of the states of the stack below will not appear during the real execution of the program, for example “)” will never be pushed into the stack, but to make things clear, I include these “hidden” steps here.</p>

<p>[”(“ =&gt; “()” =&gt; “2” =&gt; “2)” =&gt; “” =&gt; “(“ =&gt; “((“ =&gt; “(()” =&gt; “(2” =&gt; “(2)” =&gt; “4”  ]</p>

<p>In summary, if </p>

<ul>
  <li>S[i] = ‘(‘: we push -1 into the stk.</li>
  <li>S[i] = ‘)’: we check if the stk is empty. 
    <ul>
      <li>if not, we check the top element
        <ul>
          <li>if a number, we cache it and pop the top</li>
        </ul>
      </li>
      <li>then we check the top again, if a ‘(‘, we know we have got a valid pair and then pop the top
        <ul>
          <li>As it is possible that the second top now is also a number of valid length (ex. stk = “2()”), we check it and pop it if it is a number.</li>
          <li>we push the sum of the above three into the stk</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="about-time-complexity">About time complexity,</h2>

<ul>
  <li>the number of times “-1” is pushed into the stack equals the number of “(“ in the string.</li>
  <li>The maximum number that can appear in the stack is less or equal to n (the length of the strings), thus the number of pushes when s[i] = ‘)’ must be less than n.</li>
</ul>

<p>Thus it is a <script type="math/tex">O(n)</script> solution.</p>

</div>

          <div class="footer">
            <div class="contact">
              <p>
                My Github<br />
                E-mail<br />
                LinkedIn
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://github.com/tkcrown">github.com/tkcrown</a><br />
                pjin1[[at]]ualberta[dot]ca<br />
                http://www.linkedin.com/pub/ping-jin/3a/a3b/97a
              </p>
            </div>
          </div>



    <!--disqus-->
    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'tkcrown'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    



    </body>
</html>
