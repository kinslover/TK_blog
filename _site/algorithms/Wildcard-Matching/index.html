<!DOCTYPE html>
<html>
<!--
====================================================
    __  ____  ______________  _______ ___    __ 
   / / / /  |/  / ____/   \ \/ / ___//   |  / / 
  / /_/ / /|_/ / /_  / /| |\  /\__ \/ /| | / /  
 / __  / /  / / __/ / ___ |/ /___/ / ___ |/ /___
/_/ /_/_/  /_/_/   /_/  |_/_//____/_/  |_/_____/
                                                     
====================================================
Author: Hossain Mohammad Faysal
Profile: https://www.facebook.com/hmfaysal
Version: 1.0
Description: Awesome dude, awesome life
====================================================
-->
<head>
    <script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script> 

<meta charset="utf-8">
<title>WILDCARD MATCHING &vert; TK_BLOG</title>
<meta name="description" content="Evolution">
<meta name="keywords" content="leetcode, regular expression">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Wildcard Matching">
<meta property="og:description" content="Evolution">
<meta property="og:url" content="/algorithms/Wildcard-Matching">
<meta property="og:site_name" content="TK_blog">
<meta property="og:image" content="/images/">





<link rel="canonical" href="/algorithms/Wildcard-Matching">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="TK_blog Feed">
<link rel="author" href="https://plus.google.com/u/0/102602916593522619858?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400,600,300,800,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/vendor/normalize.css">
    <link rel="stylesheet" href="/assets/css/vendor/foundation.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
    





<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

        <main id="summer-post-container-simple" class="summer-post-container-simple" role="main">
            <header class="summer-post-header-simple">
                <div class="summer-post-menu-header-simple">

                    <a class="summer-blog-logo" href="">
                        <img src="/images/logo.png" alt="Blog Logo" />
                    </a>

                <div class="summer-blog-menu">      
    <div class="summer-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="summer-menu">
        <li class="summer-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>

            <li>
                    <a href="/">Home</a>
                 </li>

            <li>
                    <a href="/featured">Featured Posts</a>
                 </li>

            <li>
                    <a href="/categories">Categories</a>
                 </li>

            <li>
                    <a href="/about">About</a>
                 </li>
            
           <li><a href="/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
    </ul>

</div>
            </div>

                <div class="summer-post-title-simple row">
                    <div class="small-12 columns">
                        <div class="summer-post-meta-simple">
                            <h1>Wildcard Matching</h1>
                            <p>by <strong>Ping Jin</strong> &#8212; on <a href="/tags/index.html#leetcode, regular expression" data-toggle="tooltip" title="Posts tagged with leetcode, regular expression" rel="tag">leetcode, regular expression</a> <strong><time datetime="2014-08-22T00:00:00+06:00">22 Aug 2014</time></strong></p>
                        </div>
                    </div>
                </div>
            </header>

        <article class="summer-post-content post tag-simple">
            <div><h1 id="solution-dfs-with-memorization">Solution: DFS with memorization</h1>

<p>This is a similar problem to <a href="http://leetcode.com/2011/09/regular-expression-matching.html">Regular Expression Matching</a>. However, the test data on leetcode OJ here is much stronger. The length of string can be over 1000. For problem, Regular Expression Matching, I wrote a DFS with memorization <a href="">solution</a>, which solved the problem in 50ms. However that solution will explode the memory in this problem.</p>

<p>To solve this problem, I added more pruning into the search and finally avoided MLE and solved it on OJ in 528 ms (Not good!).</p>

<p>Anyway, here comes the code and the two prunings I used are explained in the comments.</p>

<p>The time complexity complexity is <script type="math/tex">O(n^2)</script>, as we use <code>visited</code> to record if a position pair is visited. The space complexity is also <script type="math/tex">O(n^2)</script></p>

<h2 id="code">Code</h2>

<div class="highlight"><pre><code class="c++"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="lineno"> 2</span> <span class="nl">public:</span>
<span class="lineno"> 3</span>     <span class="kt">bool</span> <span class="n">isMatch</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span>     	<span class="c1">// simplify pattern &quot;a***b&quot; into &quot;a*b&quot;</span>
<span class="lineno"> 6</span>         <span class="kt">int</span> <span class="n">on_streak</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 7</span>         <span class="kt">char</span> <span class="n">tProxy</span><span class="p">[</span><span class="n">strlen</span><span class="p">(</span><span class="n">t</span><span class="p">)];</span>
<span class="lineno"> 8</span>         <span class="kt">int</span> <span class="n">tLen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 9</span>         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="o">++</span> <span class="n">i</span><span class="p">){</span>
<span class="lineno">10</span>             <span class="k">if</span> <span class="p">(</span><span class="n">on_streak</span> <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
<span class="lineno">11</span>                 <span class="k">continue</span><span class="p">;</span>
<span class="lineno">12</span>             <span class="n">on_streak</span> <span class="o">=</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span>
<span class="lineno">13</span>             <span class="n">tProxy</span><span class="p">[</span><span class="n">tLen</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>            
<span class="lineno">14</span>         <span class="p">}</span>
<span class="lineno">15</span>         <span class="n">tProxy</span><span class="p">[</span><span class="n">tLen</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">16</span>         
<span class="lineno">17</span>         <span class="c1">// record which pair of positions are visited, details go in dfs function</span>
<span class="lineno">18</span>         <span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="n">visited</span><span class="p">;</span>        
<span class="lineno">19</span> 
<span class="lineno">20</span>         <span class="c1">// realNum[i]: number of non-&quot;*&quot; chars in tProxy[i..tLen], for pruning        </span>
<span class="lineno">21</span>         <span class="kt">int</span> <span class="n">realNum</span><span class="p">[</span><span class="n">tLen</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span> 
<span class="lineno">22</span>         <span class="n">realNum</span><span class="p">[</span><span class="n">tLen</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>        
<span class="lineno">23</span>         <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">tLen</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span> <span class="n">i</span><span class="p">)</span>
<span class="lineno">24</span>             <span class="n">realNum</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">tProxy</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span><span class="o">?</span><span class="n">realNum</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="n">realNum</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">25</span> 
<span class="lineno">26</span>         <span class="kt">bool</span> <span class="n">re</span> <span class="o">=</span> <span class="n">dfs</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">tProxy</span><span class="p">,</span> <span class="n">tLen</span><span class="p">,</span> <span class="n">visited</span><span class="p">,</span> <span class="n">realNum</span><span class="p">);</span>
<span class="lineno">27</span>         
<span class="lineno">28</span>         <span class="k">return</span> <span class="n">re</span><span class="p">;</span>  
<span class="lineno">29</span>     <span class="p">}</span>
<span class="lineno">30</span>     
<span class="lineno">31</span>     <span class="kt">bool</span> <span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">idx1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">idx2</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">s</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">sLen</span><span class="p">,</span> <span class="kt">char</span> <span class="n">t</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">tLen</span><span class="p">,</span> <span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span> <span class="o">&gt;&amp;</span><span class="n">visited</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">[]){</span>
<span class="lineno">32</span>     	<span class="c1">// case1: both reach ends, case2: s reach ends, t only has &#39;*&#39; remained</span>
<span class="lineno">33</span>         <span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="n">s</span><span class="p">[</span><span class="n">idx1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="n">s</span><span class="p">[</span><span class="n">idx1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">num</span><span class="p">[</span><span class="n">idx2</span><span class="p">])</span> <span class="p">)</span>
<span class="lineno">34</span>             <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">35</span> 
<span class="lineno">36</span>         <span class="c1">// PRUNING: ignore the visited pair of positions</span>
<span class="lineno">37</span>         <span class="k">if</span> <span class="p">(</span><span class="n">visited</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">idx1</span><span class="o">*</span><span class="p">(</span><span class="n">tLen</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">idx2</span><span class="p">))</span>
<span class="lineno">38</span>             <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="lineno">39</span> 
<span class="lineno">40</span>         <span class="n">visited</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">idx1</span><span class="o">*</span><span class="p">(</span><span class="n">tLen</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">idx2</span><span class="p">);</span>
<span class="lineno">41</span> 
<span class="lineno">42</span>         <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="n">s</span><span class="p">[</span><span class="n">idx1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">idx1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">])</span>  <span class="p">)</span>
<span class="lineno">43</span>             <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>        
<span class="lineno">44</span>         <span class="c1">//match</span>
<span class="lineno">45</span>         <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">idx1</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">]</span> <span class="o">||</span> <span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;?&#39;</span> <span class="o">||</span> <span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span>
<span class="lineno">46</span>             <span class="k">if</span> <span class="p">(</span><span class="n">dfs</span><span class="p">(</span><span class="n">idx1</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">idx2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">sLen</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tLen</span><span class="p">,</span> <span class="n">visited</span><span class="p">,</span> <span class="n">num</span><span class="p">))</span>
<span class="lineno">47</span>                 <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">48</span>         <span class="p">}</span>        
<span class="lineno">49</span>         <span class="c1">// other two cases for &#39;*&#39;</span>
<span class="lineno">50</span>         <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">idx2</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span> 
<span class="lineno">51</span>         	<span class="c1">// PRUNING: numer of remaining chars in s should be greater or equal to non-&quot;*&quot; in t</span>
<span class="lineno">52</span>         	<span class="c1">// otherwise, impossible to match</span>
<span class="lineno">53</span>         	<span class="c1">// e.g. s = &quot;aaab&quot; t = &quot;??bbb*&quot;</span>
<span class="lineno">54</span>             <span class="k">if</span> <span class="p">(</span><span class="n">sLen</span> <span class="o">-</span> <span class="n">idx1</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">[</span><span class="n">idx2</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">idx1</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">idx2</span><span class="p">,</span>  <span class="n">s</span><span class="p">,</span> <span class="n">sLen</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tLen</span><span class="p">,</span> <span class="n">visited</span><span class="p">,</span> <span class="n">num</span><span class="p">))</span>
<span class="lineno">55</span>                 <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> 
<span class="lineno">56</span>             <span class="k">if</span> <span class="p">(</span> <span class="n">sLen</span> <span class="o">-</span> <span class="n">idx1</span> <span class="o">&gt;=</span> <span class="n">num</span><span class="p">[</span><span class="n">idx2</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">dfs</span><span class="p">(</span><span class="n">idx1</span><span class="p">,</span> <span class="n">idx2</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span>  <span class="n">s</span><span class="p">,</span> <span class="n">sLen</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tLen</span><span class="p">,</span> <span class="n">visited</span><span class="p">,</span> <span class="n">num</span><span class="p">))</span>
<span class="lineno">57</span>                 <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> 
<span class="lineno">58</span>         <span class="p">}</span>        
<span class="lineno">59</span>         
<span class="lineno">60</span>         <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>        
<span class="lineno">61</span>     <span class="p">}</span>
<span class="lineno">62</span> <span class="p">};</span>
</code></pre></div>

<h1 id="a-dp-solution">A DP solution</h1>

<p>Let us define <code>match[i][j]</code> to indicate if string <code>s[0...i-1]</code> can match pattern <code>t[0...j-1]</code> or not. Then the state transition function is </p>

<ul>
  <li>if <code>t[j-1] == '*'</code>, 
    <ul>
      <li><code>match[i][j] =</code> <script type="math/tex">\cup_{k \in \{0,...,i\}}</script> <code>match[i-k][j-1]</code></li>
    </ul>
  </li>
  <li>if <code>t[j-1] != '*'</code>, 
    <ul>
      <li><code>match[i][j] = (match[i-1][j-1]) &amp;&amp; (s[i-1] == t[j-1] || t[j-1] == '?')</code></li>
    </ul>
  </li>
</ul>

<p>As <code>match[*][j]</code> only relies on <code>match[*][j-1]</code>, we can use 1-D array instead of 2-D array.</p>

<h2 id="code-1">Code</h2>

<p>Unfortunately this code will lead to TLE. There is some SPECIAL test case that requires that you treat it special (if you paste this code into OJ, you will see that case). I really dislike this kind of requirement, as we already reached a solution with the best time complexity and neat code implementation.</p>

<div class="highlight"><pre><code class="c++"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Solution</span><span class="p">{</span>
<span class="lineno"> 2</span> <span class="nl">public:</span>
<span class="lineno"> 3</span>     <span class="kt">bool</span> <span class="n">isMatch</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 4</span>     	<span class="kt">int</span> <span class="n">sLen</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">tLen</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
<span class="lineno"> 5</span>     	<span class="kt">bool</span> <span class="n">match</span><span class="p">[</span><span class="n">sLen</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
<span class="lineno"> 6</span>     	<span class="n">memset</span><span class="p">(</span><span class="n">match</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">sLen</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
<span class="lineno"> 7</span>     	<span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno"> 8</span>     	<span class="kt">int</span> <span class="n">firstTruePos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 9</span>     	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">tLen</span><span class="p">;</span> <span class="o">++</span> <span class="n">j</span><span class="p">){</span>    		    		
<span class="lineno">10</span>     	    <span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span>
<span class="lineno">11</span>     	    	<span class="n">firstTruePos</span> <span class="o">=</span> <span class="n">sLen</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
<span class="lineno">12</span>     			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">sLen</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">){</span>
<span class="lineno">13</span>     				<span class="n">match</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">match</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;?&#39;</span><span class="p">);</span>
<span class="lineno">14</span>     				<span class="k">if</span> <span class="p">(</span><span class="n">firstTruePos</span> <span class="o">==</span> <span class="n">sLen</span><span class="o">+</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">match</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">firstTruePos</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="lineno">15</span>     			<span class="p">}</span>
<span class="lineno">16</span>     		<span class="p">}</span>
<span class="lineno">17</span>     		<span class="k">else</span><span class="p">{</span>
<span class="lineno">18</span>     			<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">sLen</span><span class="p">;</span> <span class="o">++</span> <span class="n">i</span><span class="p">)</span>						
<span class="lineno">19</span>     				<span class="n">match</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">firstTruePos</span><span class="p">)</span><span class="o">?</span> <span class="nb">false</span><span class="o">:</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">20</span>     		<span class="p">}</span>
<span class="lineno">21</span>     		<span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">);</span>
<span class="lineno">22</span>     		<span class="k">if</span> <span class="p">(</span><span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="n">firstTruePos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">23</span>     	<span class="p">}</span>
<span class="lineno">24</span>     	<span class="k">return</span> <span class="n">match</span><span class="p">[</span><span class="n">sLen</span><span class="p">];</span>
<span class="lineno">25</span> 	<span class="p">}</span>	
<span class="lineno">26</span> <span class="p">};</span>
</code></pre></div>

<h1 id="a-greedy-solution">A Greedy Solution</h1>

<p>The key thoughts of this greedy solution are</p>

<ul>
  <li>we only care about the last asterik we met. </li>
  <li>Every time a mismatch happens, one character in <code>s</code> will be absorbed by the the nearest asterik. </li>
</ul>

<p>The conditions for failure of match is
- if no asterik has been spotted before a mismatch happens
- if we find there is no chars left in <code>s</code>, while we still have patterns (chars except asterisk) left in <code>p</code></p>

<p>The description above is too abstract, let me use a GIF to illustrate how this greedy algorithm works.</p>

<p align="center">
<img src="/images/WildcardMatching2.gif" />
</p>

<p>The time complexity of this algorithm is still <script type="math/tex">O(nm)</script>, but as it is pretty “aggressive”, it only need linear time for some special cases and the average performance is better than the DP solution.</p>

<h2 id="code-2">Code</h2>

<p>Here is my implementation.</p>

<div class="highlight"><pre><code class="c++"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="lineno"> 2</span> <span class="nl">public:</span>
<span class="lineno"> 3</span> 	<span class="kt">bool</span> <span class="n">isMatch</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">t</span><span class="p">){</span>
<span class="lineno"> 4</span> 		<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno"> 5</span> 		<span class="kt">int</span> <span class="n">lastAsterPos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="lineno"> 6</span> 		<span class="kt">int</span> <span class="n">toAbsorb</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="lineno"> 7</span> 		<span class="k">while</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]){</span>
<span class="lineno"> 8</span> 			<span class="k">if</span> <span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span> <span class="c1">// Asterisk</span>
<span class="lineno"> 9</span> 				<span class="n">lastAsterPos</span> <span class="o">=</span> <span class="n">j</span> <span class="o">++</span><span class="p">;</span>
<span class="lineno">10</span> 				<span class="n">toAbsorb</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="lineno">11</span> 			<span class="p">}</span>
<span class="lineno">12</span> 			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">||</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;?&#39;</span><span class="p">)</span> <span class="c1">//match</span>
<span class="lineno">13</span> 				<span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">j</span> <span class="o">++</span><span class="p">;</span>
<span class="lineno">14</span> 			<span class="k">else</span><span class="p">{</span> <span class="c1">//mismatch</span>
<span class="lineno">15</span> 				<span class="k">if</span> <span class="p">(</span><span class="n">lastAsterPos</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="lineno">16</span> 				<span class="n">j</span> <span class="o">=</span> <span class="n">lastAsterPos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">17</span> 				<span class="n">i</span> <span class="o">=</span> <span class="o">++</span><span class="n">toAbsorb</span><span class="p">;</span>
<span class="lineno">18</span> 			<span class="p">}</span>
<span class="lineno">19</span> 		<span class="p">}</span>
<span class="lineno">20</span> 		<span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">)</span>
<span class="lineno">21</span> 			<span class="n">j</span><span class="o">++</span><span class="p">;</span>
<span class="lineno">22</span> 		<span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
<span class="lineno">23</span> 	<span class="p">}</span>
<span class="lineno">24</span> <span class="p">};</span>
</code></pre></div>


            </div>
        </article>
        <div class="cf"></div>
        <div class="row text-center">
            <section class="summer-post-share">
                <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;Wildcard Matching&quot;%20/algorithms/Wildcard-Matching%20via%20&#64;"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=/algorithms/Wildcard-Matching"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
                    <i class="fa fa-facebook"></i>
                </a>
                <a class="google-icon" href="https://plus.google.com/share?url=/algorithms/Wildcard-Matching"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
                    <i class="fa fa-google-plus"></i>
                </a>
            </section>
        </div>
        <div class="cf"></div>
        
            <div class="summer-author-info">
                <div class="row">
                    <section class="summer-post-author small-12 columns">
                        
                            <img src="/images/bio.png" class="summer-post-author-avatar" alt="Ping Jin's photo">
                        
                        
                            <span class="author-label">Author</span>
                            <h1>Ping Jin</h1>
                        
                        
                            <p><a href="mailto:pjin1@ualberta.ca" class="author-website">pjin1@ualberta.ca</a></p>
                        
                        
                            <p>Awesome Dude, Awesome Life</p>
                        
                    </section>
                </div>
            </div> 
        
        <div class="cf"></div>
        
        <section class="summer-disqus row">
    <div class="small-12 columns">
        <h1 class="summer-comments-header">Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'tkcrown'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

        <div class="cf"></div>

    <footer class="summer-site-footer">
    <div class="copyright">
         <section>All content copyright <a href="/about">Ping Jin</a> &copy; 2014 &bull; All rights reserved.</section>
         <section>Proudly published with <a class="icon-ghost" href="https://jekyllrb.com/">Jekyll</a></section>
    </div>
    <div class="social-icons">
        
        
        
        <a href="https://plus.google.com/u/0/102602916593522619858">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-google-plus fa-stack-1x"></i>
            </span>
        </a>
        
        
        
        <a href="http://github.com/https://github.com/tkcrown">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-github fa-stack-1x"></i>
            </span>
        </a>
        
        
    </div>
    
    <div class="cf"></div>
</footer> 
</main>    
    <script src="/assets/js/vendor/modernizr.js"></script>
    <script src="/assets/js/foundation.min.js"></script>
    <script src="/assets/js/vendor/background-check.js"></script>
    <script src="/assets/js/vendor/post-header-animations.js"></script>
    <script src="/assets/js/summer.js"></script>

    <script>
      $(document).foundation();
    </script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45812015-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
 
</body>
</html>
